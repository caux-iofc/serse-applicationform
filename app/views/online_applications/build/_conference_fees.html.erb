
</div>
<div class="row">
  <div class="col-md-12 text-center">
    <h3><%=t :conference_fees %></h3>
  </div>

  <div class="col-md-12">
    <%= label_tag :rate, t(:please_choose_your_rate), class: 'control-label' %><br/>
    <%=t :more_information_about_conference_fees_html %><br />
  </div>

</div>

<div class="row">
  <div class="col-md-12">
    <hr>
  </div>
</div>


<%= f.fields_for :online_applications do |builder| %>
  <span class="oa-counter" id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>"></span>
  <%= builder.hidden_field :relation %>
  <%= builder.hidden_field :arrival %>
  <%= builder.hidden_field :departure %>
  <%= builder.hidden_field :date_of_birth %>
  <%= builder.hidden_field :day_visit %>
  <%= builder.hidden_field :volunteer %>
  <%= builder.hidden_field :staff %>
  <%= builder.hidden_field :interpreter %>
  <%= builder.hidden_field :caux_scholar %>
  <%= builder.hidden_field :caux_intern %>
  <%= builder.hidden_field :caux_artist %>
  <%= builder.hidden_field :conference_team %>
  <%= builder.hidden_field :conference_speaker %>
  <%= builder.hidden_field :week_of_international_community %>

  <div class="row">
    <div class="col-md-12">
      <div class="form-group">
        <%= builder.label :rate, builder.object.firstname + ' ' + builder.object.surname, class: 'control-label' %>
      </div>
      <div class="form-group required">
        <div class="radio">
          <label>
            <%= builder.radio_button :rate, 'full_premium', :class => 'rate control-label' %> <%=t :full_premium %>
          </label>
          <label>
            <%= builder.radio_button :rate, 'standard', :class => 'rate' %> <%=t :standard %>
          </label>
          <% if builder.object.application_group.family_registration -%>
            <label>
              <%= builder.radio_button :rate, 'family', :class => 'rate' %> <%=t :family %>
            </label>
          <% end -%>
          <% if builder.object.volunteer -%>
            <label>
              <%= builder.radio_button :rate, 'volunteer', :class => 'rate' %> <%=t :volunteer %>
            </label>
          <% end -%>
          <% if builder.object.staff -%>
            <label>
              <%= builder.radio_button :rate, 'staff', :class => 'rate' %> <%=t :staff %>
            </label>
          <% end -%>
          <% if builder.object.interpreter -%>
            <label>
              <%= builder.radio_button :rate, 'interpreter', :class => 'rate' %> <%=t :interpreter %>
            </label>
          <% end -%>
          <label>
            <%= builder.radio_button :rate, 'student', :class => 'rate' %> <%=t :student %>
          </label>
          <label>
            <%= builder.radio_button :rate, 'amis_de_caux', :class => 'rate' %> <%=t :amis_de_caux %>
          </label>
          <label>
            <%= builder.radio_button :rate, 'local_iofc_team_member', :class => 'rate' %> <%=t :local_iofc_team_member %>
          </label>
        </div>
      </div>
    </div>
  </div>

  <%= builder.hidden_field :calculated_nights, :class => 'calculated_nights' %>
  <%= builder.hidden_field :calculated_night_rate, :size => 6 %>
  <%= builder.hidden_field :calculated_registration_fee, :size => 6 %>
  <%= builder.hidden_field :calculated_total_personal_contribution, :size => 6 %>
  <%= builder.hidden_field :calculated_rate_and_fee_details %>

  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_show_if_paid_by_foundation">
    <div class="col-md-12">
      <%= t(:costs_covered_by_foundation) -%>
    </div>
  </div>


  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-7">
      &nbsp;
    </div>
    <div class="col-md-1">
      <label><%=t :sponsors_nights %></label>
    </div>
    <div class="col-md-2 text-right">
      <label><%=t :rate_per_night %></label>
    </div>
    <div class="col-md-2 text-right">
      <label><%=t :total %></label>
    </div>
  </div>

  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-7">
     <%=t :cost_of_your_stay -%><span class="conference_package" style="display: none"> (<%=t :conference_package -%>)</span><span class="early_bird_discount" style="display: none"> (<%=t :early_bird_discount -%>)</span>
    </div>
    <div class="col-md-1">
      <div id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_nights_visible"></div>
    </div>
    <div class="col-md-2">
      <div class="col-sm-6 text-right">
        CHF
      </div>
      <div class="col-sm-6 text-right">
        <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_rate_per_night_visible"></span><%= builder.hidden_field :rate_per_night %>
      </div>
    </div>
    <div class="col-md-2">
      <div class="col-sm-8 text-right">
        CHF
      </div>
      <div class="col-sm-4 text-right">
        <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_total_nights_visible"></span><%= builder.hidden_field :total_nights %>
      </div>
    </div>
  </div>
  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-10">
      <%=t :registration_fee %>
    </div>
    <div class="col-md-2">
      <div class="col-sm-8 text-right">
        CHF
      </div>
      <div class="col-sm-4 text-right">
        <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_registration_fee_visible"></span><%= builder.hidden_field :registration_fee %>
      </div>
    </div>
  </div>

  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-12">
      <hr>
    </div>
  </div>

  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-12">
      <%=t :nightly_contribution_html %>
    </div>
  </div>

  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-12">
      <hr>
    </div>
  </div>

  <div class="row application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
    <div class="col-md-7">
      <label><%=t :sponsors_name %></label>
    </div>
    <div class="col-md-1">
      <label><%=t :sponsors_nights %></label>
    </div>
    <div class="col-md-2 text-right">
      <label><%=t :sponsors_amount %></label>
    </div>
  </div>
  <div class="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_hide_if_paid_by_foundation">
  <%= builder.fields_for :sponsors do |sf| -%>
    <% if sf.object.auto -%>
      <div class="row" id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_sponsors_attributes_<%= sf.object_name.gsub(/^.*([0-9])\]$/,'\1') -%>" style="display: none">
        <div class="col-md-7">
          <div class="form-group">
            <%= sf.hidden_field :auto, :class => 'form-control' %>
            <%= sf.hidden_field :name, :class => 'form-control' %>
            <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_sponsors_attributes_<%= sf.object_name.gsub(/^.*([0-9])\]$/,'\1') -%>_name"></span>
          </div>
        </div>
        <div class="col-md-1">
          <div class="form-group">
            <%= sf.hidden_field :nights, { :class => 'form-control' } %>
            <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_sponsors_attributes_<%= sf.object_name.gsub(/^.*([0-9])\]$/,'\1') -%>_nights"></span>
          </div>
        </div>
        <div class="col-md-2">
          <div class="col-sm-6 text-right">
            CHF
          </div>
          <div class="col-sm-6 text-right">
            <span><%= sf.hidden_field :amount, { :class => 'form-control' } %></span>
            <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_sponsors_attributes_<%= sf.object_name.gsub(/^.*([0-9])\]$/,'\1') -%>_amount"></span>
          </div>
        </div>
        <div class="col-md-2">
          <div class="col-sm-8 text-right">
            CHF
          </div>
          <div class="col-sm-4 text-right">
            <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_sponsors_attributes_<%= sf.object_name.gsub(/^.*([0-9])\]$/,'\1') -%>_total"></span>
          </div>
        </div>
      </div>
    <% else -%>
      <div class="row">
        <div class="col-md-7">
          <div class="form-group">
            <%= sf.hidden_field :auto, :class => 'form-control' %>
            <%= sf.text_field :name, { :class => "form-control" } %>
          </div>
        </div>
        <div class="col-md-1">
          <div class="form-group">
            <%= sf.text_field :nights, { :class => "form-control sponsor_field_#{sf.object_name.gsub(/[^0-9]+/,'')}" } %>
          </div>
        </div>
        <div class="col-md-2">
          <div class="col-sm-6 text-right">
            CHF
          </div>
          <div class="col-sm-6 text-right">
            <span><%= sf.text_field :amount, { :class => "form-control sponsor_field_#{sf.object_name.gsub(/[^0-9]+/,'')}" } %></span>
          </div>
        </div>
        <div class="col-md-2">
          <div class="col-sm-8 text-right">
            CHF
          </div>
          <div class="col-sm-4 text-right">
            <span id="application_group_online_applications_attributes_<%= builder.object_name.gsub(/[^0-9]+/,'') -%>_sponsors_attributes_<%= sf.object_name.gsub(/^.*([0-9])\]$/,'\1') -%>_total"></span>
            <span id="sponsor_field_<%= sf.object_name.gsub(/[^0-9]+/,'') -%>"></span>
          </div>
        </div>
      </div>
    <% end -%>
  <% end -%>
  </div>

  <div class="row">
    <div class="col-md-12">
      <hr>
    </div>
  </div>

  <% if builder.object.relation == 'primary applicant' -%>
    <% @remarks = "<div class=\"form-group\">" + builder.label(:financial_remarks, t(:remarks), class: 'control-label') + builder.text_area(:financial_remarks, { :rows => 5, :class => 'form-control' }) + "</div>" -%>
  <% end -%>

<% end -%>

<div class="row">
  <div class="col-md-12">
    <div id="personalContribution">
      <h4><%=t :please_check_total_html %></h4>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-4 col-md-offset-6">
    <div class="col-sm-12 text-right">
      <h3><%=t :personal_contribution_html %>:</h3>
    </div>
  </div>
  <div class="col-md-2 label label-warning">
    <div class="col-sm-6 text-right">
      <strong><h3>CHF</h3></strong>
    </div>
    <div class="col-sm-6 text-right">
      <strong><h3><span id="total_automatic">0</span></h3></strong>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-md-12">
    <% if @application_group.group_registration -%>
      <%=t :financial_remarks_detail -%>
    <% end -%>
    <%= @remarks.html_safe -%>
  </div>

