<% if online_application.relation != 'primary applicant' -%>
<div class="row">
  <div class="col-md-12">
    <hr>
    <%= error_messages_for_object f.object %>
  </div>
</div>
<% end -%>

<div class="row">
  <div class="col-md-12 text-center">
    <h4><%= online_application.firstname -%> <%= online_application.surname -%></h4>
  </div>
</div>

<div class="row">
  <div class="col-md-12">

    <% @first_normal_conference = true -%>
    <% @first_special_conference = true -%>
    <%= f.fields_for :online_application_conferences do |oac| %>
      <% if @first_normal_conference -%>
        <div class="row">
          <div class="col-md-12 text-center">
            <h3><%=t :conference_participation %></h3>
          </div>
        </div>
        <% @first_normal_conference = false -%>
      <% end -%>
      <% if oac.object.conference.special and not oac.object.selected and @first_special_conference -%>
        <div class="row">
          <div class="col-md-12 text-center">
            <h3><%=t :special_conference_participation %></h3>
          </div>
        </div>
        <% @first_special_conference = false -%>
      <% end -%>
      <% if oac.object.conference.full -%>
        <div class="row">
          <div class="col-md-12">
            <i><%=t :conference_full -%></i>
          </div>
        </div>
      <% end -%>
      <div class="row">
        <%= oac.hidden_field :conference_id, :value => oac.object.conference.id %>
        <%= oac.hidden_field :priority_sort, :value => oac.object.priority_sort %>

        <div class="col-md-1">
          <% if not oac.object.conference.full -%>
            <%= oac.check_box :selected, :class => "oac_checkbox_#{online_application.id}_#{oac.object.conference.id}" %>
          <% end -%>
        </div>
        <div class="col-md-5">
          <%= label_tag :conference_id, oac.object.conference.name %>
        </div>
        <div class="col-md-6" align="left">
          <%=l oac.object.conference.start.to_date, :format => :standard %> - <%=l oac.object.conference.stop.to_date, :format => :standard %>
        </div>
      </div>
      <% if not oac.object.conference.byline.nil? -%>
        <div class="row">
          <div class="col-md-11 col-md-offset-1">
            <font size="-1"><%= oac.object.conference.byline.html_safe %></font>
          </div>
        </div>
      <% end -%>
        <div class="well oac_checkbox_<%= online_application.id %>_<%= oac.object.conference.id %>_subform center-block" style="display:none; width:800px; background: rgb(49, 176, 213)">
          <div class="row">
            <div class="col-md-12">
              <div class="conference_subform_td">
                <div class="conference_subform">
                  <%= oac.fields_for :variables do |var| -%>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group required">
                        <%= var.label :team_member_reference_person, t(:team_member_reference_person), class: 'control-label' %>
                        <%= var.text_field :team_member_reference_person, { :value => oac.object.variables["team_member_reference_person"], :class => 'form-control' } %>
                      </div>
                    </div>
                  </div>
                  <% end -%>
                </div>
              </div>
            </div>
          </div>
        </div>
    <% end -%>

    <% if TrainingProgram.with_translations.where('session_group_id = ?',session[:session_group_id]).size > 0 -%>
      <div class="row">
        <div class="col-md-12 text-center">
          <h3><%=t :special_program_participation %></h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <i><%=t :please_only_register_if_you_have_been_accepted_beforehand %></i>
        </div>
      </div>
    <% end -%>

    <% TrainingProgram.with_translations.where('session_group_id = ?',session[:session_group_id]).each do |tp| -%>
      <div class="row">
        <div class="col-md-1">
          <%= check_box_tag :training_program_ids, tp.id, @online_application.training_programs.include?(tp), :name => 'online_application[training_program_ids][]', :id => "tp_check_" + (tp.nil? or tp.name.nil? ? '' : tp.name.downcase) %>
        </div>
        <div class="col-md-5">
          <%= label_tag :training_program_ids, tp.name %>
        </div>

        <div class="col-md-6">
          <% if tp.display_dates -%>
            <%=l tp.start.to_date, :format => :standard %> - <%=l tp.stop.to_date, :format => :standard %>
          <% else -%>
            &nbsp;
          <% end -%>
        </div>
      </div>
      <% if not tp.byline.nil? -%>
        <div class="row">
          <div class="col-md-1">
            &nbsp;
          </div>
          <div class="col-md-11">
            <font size="-1"><%= tp.byline.html_safe %></font>
          </div>
        </div>
      <% end -%>
    <% end -%>

    <div class="row">
      <div class="col-md-12 text-center">
        <h3><%=t :other_reason_title %></h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <i><%=t :please_only_select_this_if_you_have_been_accepted %></i>
      </div>
    </div>

    <div class="row">
      <div class="col-md-1">
        <%= f.check_box :interpreter %>
      </div>
      <div class="col-md-11">
        <label><%=t :interpreter %></label>
      </div>
    </div>
    <div class="row">
      <div class="col-md-1">
        <%= f.check_box :volunteer %>
      </div>
      <div class="col-md-5">
        <label><%=t :volunteer %></label>, <%=t :volunteer_please_specify %>
      </div>
      <div class="col-md-6">
        <%= f.text_field :volunteer_detail, { class: 'form-control', :size => 40 } %>
      </div>
    </div>
    <div class="row hide_for_children">
      <div class="col-md-1">
        <%= f.check_box :staff %>
      </div>
      <div class="col-md-5">
        <label><%=t :staff %></label> <%=t :staff_please_specify %>
      </div>
      <div class="col-md-6">
        <%= f.text_field :staff_detail, { class: 'form-control', :size => 40 } %>
      </div>
    </div>
    <div class="row">
      <div class="form-group">
        <div class="col-md-1">
          <%= f.check_box :other_reason %>
        </div>
        <div class="col-md-5">
          <%= f.label :other_reason, t(:other), class: 'control-label' %>, <%=t :other_reason_please_specify %>
        </div>
      </div>
      <div class="col-md-6">
        <%= f.text_field :other_reason_detail, { class: 'form-control', :size => 40 } %>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <%= f.label :remarks, t(:remarks), class: 'control-label' %>
          <%= f.text_area :remarks, { :rows => 5, :class => 'form-control' } %>
        </div>
      </div>
    </div>

  </div>
</div>
